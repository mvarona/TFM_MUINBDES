<!doctype html>
<html lang="es">
	<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link rel="stylesheet" href="/static/css/style.css">
	<title> </title>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js" integrity="sha512-3j3VU6WC5rPQB4Ld1jnLV7Kd5xr+cq9avvhwqzbH/taCRNURoeEpoPBK9pDyeukwSxwRPJ8fDgvYXd6SkaZ2TA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
	<script type="text/javascript">

		function writeCookie(key, value, days) {
		    var date = new Date();
			days = days || 365;
			date.setTime(+ date + (days * 24 * 60 * 60 * 1000)); //

		    cookie = key + "=" + value + "; expires=" + date.toGMTString() + "; path=/";
		    return cookie;
		};

		$(document).ready(function() {
	     	if (!(!!$.cookie('user_id'))) {
				$.ajax({
					url: "http://127.0.0.1:5000/generate-user-id",
					method: "GET"
				})
				.then(function(result) {
					if (result != undefined && result.length == 32) {
						document.cookie = writeCookie("user_id", result);
					}
				});
			}
		});

	</script>
	<link rel="apple-touch-icon" sizes="57x57" href="/static/images/favicons/apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="/static/images/favicons/apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/static/images/favicons/apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="/static/images/favicons/apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/static/images/favicons/apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="/static/images/favicons/apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="/static/images/favicons/apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="/static/images/favicons/apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="/static/images/favicons/apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="/static/images/favicons/android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/static/images/favicons/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="/static/images/favicons/favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/static/images/favicons/favicon-16x16.png">
	<link rel="manifest" href="/static/images/favicons/manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="/static/images/favicons/ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">
	</head>
	<body>
	<nav class="navbar navbar-expand-md navbar-light bg-light">
		<a class="navbar-brand" href="/inicio">dondeTeEsperan.es</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarNav">
			<ul class="navbar-nav">
				
				
				<li class="nav-item">
				
						<a class="nav-link" href="http://127.0.0.1:5000/municipio-personalizado">Lugar solo para m√≠</a>
				</li>
				
				
				<li class="nav-item">
				
					<a class="nav-link" href="http://127.0.0.1:5000/municipio-parecido">Lugar parecido a otro</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="http://127.0.0.1:5000/municipio-aleatorio">Lugar sorpresa</a>
				</li>
			</ul>
		</div>
	</nav>
	
	<link rel="stylesheet" href="/static/css/municipality.css">
	
	<div id="bg" style="background-image: url(https://upload.wikimedia.org/wikipedia/commons/0/01/Alagon-aerea.png"></div>
	
	
	<div id="bg-layer"></div>
	<div class="container">
	
	<main id="main">
		<h1>¬°Te esperan en Alag√≥n!</h1>
		<h3 class="province">Zaragoza</h3>
		<article>
			<div class="first-column">
				<section class="intro">
					
					<p class="intro">Alag√≥n es un municipio de la provincia de Zaragoza (Espa√±a). Es la cabecera de la comarca de la Ribera Alta del Ebro y forma parte del √Årea metropolitana de Zaragoza.</p>
					
					<a class="google" href="https://www.google.es/search?q=Alag√≥n, Zaragoza" target="_blank">Buscar en Google</a>
					
					<a class="wikipedia" href="https://es.wikipedia.org/wiki/Alag%C3%B3n_(Zaragoza)" target="_blank">Ver m√°s en Wikipedia</a>
					
					
				</section>
				<section class="tags">
					
					    <span class="tag-1">Comercios</span>
					

					
					
					
					    <span class="tag-3">Alojamientos</span>
					

					
					    <span class="tag-4">Ocio</span>
					

					

					
					
					

					

					

						

							

										
					
										
					
					

					

					

						

					
					
					

					
					    <span class="tag-20">Cerca de la monta√±a</span>
					
				</section>
				<div id="small-screens-holder-second-column"></div>
				<section class="suggested">
					<span class="question">¬øQu√© te parece?</span><br/>
					<div class="answers">
						<a id="like" href="javascript:void()">ü§© &nbsp;¬°Me gusta!</a>
						<a id="dislike" href="javascript:void()">üëé &nbsp;Meh, no es para m√≠</a>
					</div>
					<span id="thankyou">¬°Gracias!</span>
					<div class="suggestions">
						<span>Si te ha gustado este municipio, puede que te guste...</span><br/>
						<a id="first-suggestion" href=""></a>
					</div>
				</section>
				<section class="map">
					<div id="static-map">
						<div style="overflow:hidden;resize:none;max-width:100%;width:100%;height:100%;"><div id="gmapcanvas" style="height:100%; width:100%;max-width:100%;"><iframe style="height:100%;width:100%;border:0;" frameborder="0" src="https://www.google.com/maps/embed/v1/place?q=41.770376,-1.122142&key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&zoom=9&maptype=satellite"></iframe></div><style>#gmapcanvas img{max-height:none;max-width:none!important;background:none!important;}</style></div>
					</div>
					<div id="streetview">
						<div style="overflow:hidden;resize:none;max-width:100%;width:100%;height:100%;"><div id="gmapcanvas" style="height:100%; width:100%;max-width:100%;"><iframe style="height:100%;width:100%;border:0;" frameborder="0" src="https://www.google.com/maps/embed/v1/streetview?location=41.770376,-1.122142&key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8"></iframe></div><style>#gmapcanvas img{max-height:none;max-width:none!important;background:none!important;}</style></div>
					</div>
				</section>
			</div>
			<div class="second-column">
				<div id="small-screens-holder-second-column-to-hide">
					<div id="features-grid">
						
						<div class="feature">
							<div class="feature-icon">
								<img alt="Icono de una casa" src="/static/images/house.png"/>
								<p>
									
									
									
									<span>2 casas en alquiler</span>
									
									
								</p>
							</div>
						</div>
						
						
						<div class="feature">
							<div class="feature-icon">
								<img alt="Icono de un fonendoscopio" src="/static/images/clinic.png"/>
								<p>
									
									
									<span>1 centro de salud</span><br/>
									
									
									
									<span>1 centro de urgencias</span>
									
								</p>
							</div>
						</div>
						
						
						
						<div class="feature">
							<div class="feature-icon">
								<img alt="Icono de un fonendoscopio" src="/static/images/school.png"/>
								<p>
									
									<span>7 colegios o<br/>institutos</span>
									
									
								</p>
							</div>
						</div>
						
						
						
						<div class="feature">
							<div class="feature-icon">
								<img alt="Icono de unas colinas" src="/static/images/hills.png"/>
								<p>
									<span>240 metros de altitud</span>
								</p>
							</div>
						</div>
						
						
						
						<div class="feature">
							<div class="feature-icon">
								<img alt="Icono de gente" src="/static/images/people.png"/>
								<p>
									<span>7.121 habitantes</span><br/>
									<span>294 hab./km¬≤</span><br/>
									<span>(media nacional: 94 hab./km¬≤)</span>
								</p>
							</div>
						</div>
						
						
						<div class="feature">
							<div class="feature-icon">
								<img alt="Icono de una ciudad" src="/static/images/city.png"/>
								<p>
									
									<span>Comprar una casa en la provincia cuesta de media 154.117 ‚Ç¨</span><br/>
									
									
									<span>Alquilar una casa en la provincia cuesta de media 720 ‚Ç¨/mes</span>
									
								</p>
							</div>
						</div>
						
						
						<div class="feature">
							<div class="feature-icon">
								<img alt="Icono de una nube y un sol" src="/static/images/weather.png"/>
								<p>
									
									<span>En febrero, 8¬∫C con 0,02 mm/d√≠a lluvia de media</span><br/>
									
									
									<span>En julio, 25¬∫C con 0,02 mm/d√≠a de lluvia de media</span>
									
								</p>
							</div>
						</div>
						
						
						<div class="feature">
							<div class="feature-icon">
								<img alt="Icono de un term√≥metro" src="/static/images/temperature.png"/>
								<p>
									
									<span>En febrero, la temperatura va de -1¬∫C a 19¬∫C de media</span><br/>
									
									
									<span>En julio, la temperatura va de 13¬∫C a 38¬∫C de media</span>
									
								</p>
							</div>
						</div>
						
						
						<div class="feature">
							<div class="feature-icon">
								<img alt="Icono de una hucha" src="/static/images/savings.png"/>
								<p>
									<span>24.204 ‚Ç¨ de renta bruta media anual</span><br/>
								</p>
							</div>
						</div>
						
						
						<div class="feature">
							<div class="feature-icon">
								<img alt="Icono de un coche" src="/static/images/car.png"/>
								<p>
									
									<span>A 23 km. de la capital de provincia</span>
									
									
								</p>
							</div>
						</div>
						
						
						<div class="feature">
							<div class="feature-icon">
								<img alt="Icono de un malet√≠n" src="/static/images/jobs.png"/>
								<p>
									
									<span>1.632 ofertas de empleo en la provincia</span><br/>
									<span>8,5 % de paro en la provincia<br/> (media nacional: 12,6 %)</span>
									
								</p>
							</div>
						</div>
						
						
						<div class="feature">
							<div class="feature-icon">
								<img alt="Icono de un sol" src="/static/images/sun.png"/>
								<p>
									<span>93.4 horas de sol en febrero de media</span><br/>
									<span>244.1 horas de sol en julio de media</span>
								</p>
							</div>
						</div>
						
						
						<div class="feature">
							<div class="feature-icon">
								<img alt="Icono de un malet√≠n" src="/static/images/internet.png"/>
								<p>
									
									<span>Fibra √≥ptica de hasta 30 MB en el 100 % del territorio</span><br/>
									
									
									<span>Fibra √≥ptica de hasta 100 MB en el 100 % del territorio</span><br/>
									
									
									<span>Cobertura m√≥vil 3G en el 100 % del territorio</span><br/>
									
									
									<span>Cobertura m√≥vil 4G en el 100 % del territorio</span>
									
								</p>
							</div>
						</div>
						
					</div>
				</div>
				
				<section class="photos">
					<div id="carouselIndicators" class="carousel slide" data-ride="carousel">
					  <ol class="carousel-indicators">
					  </ol>
					  <div class="carousel-inner">
					  </div>
					  <a class="carousel-control-prev" href="#carouselIndicators" role="button" data-slide="prev">
					    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
					    <span class="sr-only">Anterior fotograf√≠a</span>
					  </a>
					  <a class="carousel-control-next" href="#carouselIndicators" role="button" data-slide="next">
					    <span class="carousel-control-next-icon" aria-hidden="true"></span>
					    <span class="sr-only">Siguiente fotograf√≠a</span>
					  </a>
					</div>
				</section>
				
			</div>
		</article>
	</main>
	</div>
	<script type="text/javascript">
		var images = ['https://upload.wikimedia.org/wikipedia/commons/0/01/Alagon-aerea.png', 'https://upload.wikimedia.org/wikipedia/commons/7/72/AlagonAzucarera.png', 'https://upload.wikimedia.org/wikipedia/commons/1/1c/Alagon_-_Nuestra_Se%C3%B1ora_del_Castillo_1.jpg', 'https://upload.wikimedia.org/wikipedia/commons/0/01/Alagon_-_San_Antonio_de_Padua_09.JPG', 'https://upload.wikimedia.org/wikipedia/commons/f/fd/Alagon_-_San_Pedro_Apostol_01.JPG', 'https://upload.wikimedia.org/wikipedia/commons/6/6a/Clima_Zaragoza_%28Espa%C3%B1a%29.PNG', 'https://upload.wikimedia.org/wikipedia/commons/4/44/Inmueble_en_la_calle_Jota_Aragonesa_3_y_5%2C_Alag%C3%B3n%2C_Zaragoza%2C_Espa%C3%B1a%2C_2018-04-05%2C_DD_60.jpg', 'https://upload.wikimedia.org/wikipedia/commons/9/9a/Torre_San_Pedro.jpg'];
		$(document).ready(function(){

			if($('body').width() < 1075) {
			    $('#small-screens-holder-second-column').append($('#features-grid'));
			    $('#small-screens-holder-second-column-to-hide').hide();
			}

			setTimeout(function() {
  				var mainHeight = $('#main').height() + 100;
				var bodyWidth = $('body').width();
				$('#bg').css({width: (bodyWidth + 15)});
				$('#bg').css({height: (mainHeight + 15)});
				$('#bg-layer').css({height: (mainHeight)});
			}, 10);
						
		    $(window).resize(function() {
			    var mainHeight = $('#main').height() + 100;
				var bodyWidth = $('body').width();
				$('#bg').css({width: (bodyWidth + 15)});
				$('#bg').css({height: (mainHeight + 15)});
				$('#bg-layer').css({height: (mainHeight)});
			});

		    for (let i in images) {
				var indicator = "";
				var photo = "";
				if (i == 0) {
					indicator = "<li data-target='#carouselIndicators' data-slide-to=" + i + " class='active'></li>";
					photo = "<div class='carousel-item active'><img class='d-block w-100' src='" + images[i] + "' alt='Imagen de Wikipedia de Alag√≥n'></div>";
				} else {
					indicator = "<li data-target='#carouselIndicators' data-slide-to=" + i + "></li>";
					photo = "<div class='carousel-item'><img class='d-block w-100' src='" + images[i] + "' alt='Imagen de Wikipedia de Alag√≥n'></div>";
				}

				$('.photos ol.carousel-indicators').append(indicator);
				$('.photos div.carousel-inner').append(photo);
			}

			$.ajax({
				url: "https://maps.googleapis.com/maps/api/streetview/metadata?location=41.770376,-1.122142&key=AIzaSyAOAZ8lNPSi7iZOaqPj-xwOfSWe72zsCCg",
				method: "GET"
			})
			.then(function(result) {
				if (result["status"] != "OK"){
					$('#streetview').hide();
				}
			});

			$('#like').click(function() {
				var request = {};
				request["user"] = $.cookie('user_id');
				request["item"] = "50008";

				$.ajax({
					url: "http://127.0.0.1:5000/like",
					method: "POST",
					data: request
				})
				.then(function(result) {
					
				});

				$('#thankyou').fadeIn().delay(3000).fadeOut();
				$('.suggestions').delay(3000).fadeIn()
			});

			$('#dislike').click(function() {
				var request = {};
				request["user"] = $.cookie('user_id');
				request["item"] = "50008";

				$.ajax({
					url: "http://127.0.0.1:5000/dislike",
					method: "POST",
					data: request
				})
				.then(function(result) {
					
				});

				$('#thankyou').fadeIn().delay(3000).fadeOut();
			});

			$.ajax({
				url: "http://127.0.0.1:5000/recomendar/50008",
				method: "GET"
			})
			.then(function(result) {
				if (result["status"] == "Ok"){
					var name = result["data"]["municipio_nombre_humano"] + ", " + result["data"]["provincia_nombre_humano"];
					var url = "http://127.0.0.1:5000" + result["data"]["url"];
					$('#first-suggestion').html(name);
					$('#first-suggestion').attr("href", url);
				}
			});
		});
		
	</script>


	<footer class="navbar-light bg-light">
		<div class="navbar-nav">
			
			<a class="nav-link" href="#">Metodolog√≠a</a>
		</div>
	</footer>
  </body>
</html>